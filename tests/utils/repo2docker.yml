apiVersion: v1
kind: Pod
metadata:
  name: repo2docker
spec:
  # Add the server as an NFS volume for the pod
  volumes:
    # - name: nfs
    #   persistentVolumeClaim:
    #     claimName: nfs
    - name: dockersock
      hostPath:
        path: /var/run/docker.sock

  # In this container, we'll mount the NFS volume
  # and write the date to a file inside it.
  containers:
    - name: repo2docker
      image: jupyter/repo2docker:2021.01.0-35.gb6e451d
      resources:
        limits:
          nvidia.com/gpu: 1
        # limits:
        #   cpu: "4"
        # requests:
        #   cpu: "2"
      command:
        - "sleep"
        - "604800"
      # Mount the NFS volume in the container
      volumeMounts:
        # - name: nfs
        #   mountPath: "/mountpath"
        - name: dockersock
          mountPath: "/var/run/docker.sock"
