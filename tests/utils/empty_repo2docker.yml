apiVersion: v1
kind: Pod
metadata:
  annotations:
    cni.projectcalico.org/podIP: 10.42.5.224/32
    hub.jupyter.org/username: henriqueslab-zerocostdl4mic-1wtq8kg5
  creationTimestamp: "2021-02-20T22:25:14Z"
  labels:
    app: jupyterhub
    chart: jupyterhub-0.9.0
    component: singleuser-server
    heritage: jupyterhub
    hub.jupyter.org/network-access-hub: "true"
    release: binderhub-prod
  name: jupyter-henriqueslab-2dzerocostdl4mic-2d1wtq8kg5
  namespace: binderhub-prod
  resourceVersion: "12665756"
  selfLink: /api/v1/namespaces/binderhub-prod/pods/jupyter-henriqueslab-2dzerocostdl4mic-2d1wtq8kg5
  uid: 80742f02-73ca-11eb-af5d-fa163e790af4
spec:
  affinity:
    nodeAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - preference:
            matchExpressions:
              - key: hub.jupyter.org/node-purpose
                operator: In
                values:
                  - user
          weight: 100
  automountServiceAccountToken: false
  containers:
    - args:
        - jupyter-notebook
        - --ip=0.0.0.0
        - --port=8888
        - --NotebookApp.base_url=/binderhub/user/henriqueslab-zerocostdl4mic-1wtq8kg5/
        - --NotebookApp.token=nl9aJbgAS_OoG2rJUzM5FQ
        - --NotebookApp.trust_xheaders=True
      env:
        - name: JUPYTERHUB_API_TOKEN
          value: 3dea8cb26ca841d9acf9b98951eb4427
        - name: JPY_API_TOKEN
          value: 3dea8cb26ca841d9acf9b98951eb4427
        - name: JUPYTERHUB_ADMIN_ACCESS
          value: "1"
        - name: JUPYTERHUB_CLIENT_ID
          value: jupyterhub-user-henriqueslab-zerocostdl4mic-1wtq8kg5
        - name: JUPYTERHUB_HOST
        - name: JUPYTERHUB_OAUTH_CALLBACK_URL
          value: /binderhub/user/henriqueslab-zerocostdl4mic-1wtq8kg5/oauth_callback
        - name: JUPYTERHUB_USER
          value: henriqueslab-zerocostdl4mic-1wtq8kg5
        - name: JUPYTERHUB_SERVER_NAME
        - name: JUPYTERHUB_API_URL
          value: http://10.43.103.53:8081/binderhub/hub/api
        - name: JUPYTERHUB_ACTIVITY_URL
          value: http://10.43.103.53:8081/binderhub/hub/api/users/henriqueslab-zerocostdl4mic-1wtq8kg5/activity
        - name: JUPYTERHUB_BASE_URL
          value: /binderhub/
        - name: JUPYTERHUB_SERVICE_PREFIX
          value: /binderhub/user/henriqueslab-zerocostdl4mic-1wtq8kg5/
        - name: MEM_GUARANTEE
          value: "1073741824"
        - name: JUPYTER_IMAGE_SPEC
          value: bioimagearchive/binder-henriqueslab-2dzerocostdl4mic-1ab40f:3ca1d4c250c066114110153040396f544dc726ef
        - name: JUPYTER_IMAGE
          value: bioimagearchive/binder-henriqueslab-2dzerocostdl4mic-1ab40f:3ca1d4c250c066114110153040396f544dc726ef
        - name: BINDER_REPO_URL
          value: https://github.com/HenriquesLab/ZeroCostDL4Mic
        - name: BINDER_REF_URL
          value: https://github.com/HenriquesLab/ZeroCostDL4Mic/tree/3ca1d4c250c066114110153040396f544dc726ef
        - name: BINDER_LAUNCH_HOST
          value: http://45.88.80.74/
        - name: BINDER_PERSISTENT_REQUEST
          value: v2/gh/HenriquesLab/ZeroCostDL4Mic/3ca1d4c250c066114110153040396f544dc726ef
        - name: BINDER_REQUEST
          value: v2/gh/HenriquesLab/ZeroCostDL4Mic/master
      # image: bioimagearchive/binder-henriqueslab-2dzerocostdl4mic-1ab40f:3ca1d4c250c066114110153040396f544dc726ef
      # image: continuumio/miniconda
      image: ubuntu:18.04
      imagePullPolicy: IfNotPresent
      lifecycle: {}
      name: notebook
      ports:
        - containerPort: 8888
          name: notebook-port
          protocol: TCP
      resources:
        limits:
          nvidia.com/gpu: "1"
        requests:
          memory: "4073741824"
          nvidia.com/gpu: "1"
      securityContext:
        runAsGroup: 0
        runAsUser: 1000
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
  dnsPolicy: ClusterFirst
  enableServiceLinks: true
  imagePullSecrets:
    - name: hub-image-credentials
  initContainers:
    - command:
        - iptables
        - -A
        - OUTPUT
        - -d
        - 169.254.169.254
        - -j
        - DROP
      image: jupyterhub/k8s-network-tools:0.9.0
      imagePullPolicy: IfNotPresent
      name: block-cloud-metadata
      resources: {}
      securityContext:
        capabilities:
          add:
            - NET_ADMIN
        privileged: true
        runAsUser: 0
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
  nodeName: bioimagearchiveanalysisenvironment-gpu-54883823-worker-00
  priority: 0
  restartPolicy: OnFailure
  schedulerName: binderhub-prod-user-scheduler
  securityContext:
    fsGroup: 100
  serviceAccount: default
  serviceAccountName: default
  terminationGracePeriodSeconds: 30
  tolerations:
    - effect: NoSchedule
      key: hub.jupyter.org/dedicated
      operator: Equal
      value: user
    - effect: NoSchedule
      key: hub.jupyter.org_dedicated
      operator: Equal
      value: user
    - effect: NoExecute
      key: node.kubernetes.io/not-ready
      operator: Exists
      tolerationSeconds: 300
    - effect: NoExecute
      key: node.kubernetes.io/unreachable
      operator: Exists
      tolerationSeconds: 300
status:
  message:
    "The node was low on resource: ephemeral-storage. Container notebook was
    using 3903412Ki, which exceeds its request of 0. "
  phase: Failed
  reason: Evicted
  startTime: "2021-02-20T22:27:55Z"
