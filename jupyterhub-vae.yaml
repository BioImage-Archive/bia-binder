hub:
  baseUrl: /vae/
  db:
    type: sqlite-pvc
    pvc:
      storageClassName: gluster

auth:
  type: github
  github:
    clientId: # GitLab secret
    clientSecret: # GitLab secret
    callbackUrl: https://idr-analysis.openmicroscopy.org/vae/hub/oauth_callback
    org_whitelist:
    - idr-contrib
  scopes:
  - read:org

cull:
  timeout: 3600
  every: 600

singleuser:
  storage:
    type: dynamic
    dynamic:
      storageClass: gluster
    # For gluster dynamic volumes the minimum is 1Gi
    capacity: 100Mi
    homeMountPath: /home/jovyan/scratch
    extra-volumes:
      - name: jupyter-sharedscratch
        persistentVolumeClaim:
          claimName: jupyter-sharedscratch-rw
    extra-volume-mounts:
      - name: jupyter-sharedscratch
        mountPath: /home/jovyan/shared
  networkPolicy:
    enabled: true
    # Allow
    # - internal DNS
    # - all EMBL-EBI and University of Dundee
    # - all HTTP and HTTPS
    egress:
      - to:
        - ipBlock:
            cidr: 10.0.0.0/8
        ports:
        - port: 53
          protocol: UDP
      - to:
        - ipBlock:
            cidr: 193.60.0.0/14
        - ipBlock:
            cidr: 134.36.0.0/16
      - to:
        ports:
        - port: 80
          protocol: TCP
        - port: 443
          protocol: TCP

ingress:
  annotations:
    kubernetes.io/ingress.class: nginx
    # It's unclear whether the generic ingress annotations are supported...
    ingress.kubernetes.io/proxy-body-size: 16m
    ingress.kubernetes.io/proxy-read-timeout: 3600
    ingress.kubernetes.io/proxy-send-timeout: 3600
    # ... or whether the nginx specific ones are required
    nginx.ingress.kubernetes.io/proxy-body-size: 16m
    nginx.ingress.kubernetes.io/proxy-read-timeout: 3600
    nginx.ingress.kubernetes.io/proxy-send-timeout: 3600
